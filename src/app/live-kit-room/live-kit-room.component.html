<div *ngIf="!isMeetingStarted" class="container">
  <form [formGroup]="nameForm" (ngSubmit)="startMeeting()" class="form">
    <div>
      <h1>Start Meeting</h1>
      <div>
        <label for="name">Participant Name:</label>
        <input
          placeholder="Enter your name"
          type="text"
          formControlName="name"
          id="name"
        />
      </div>
      <div class="startMeeting-container">
        <button type="submit" class="startBtn">Start Meeting</button>
      </div>
    </div>
  </form>
</div>
<ng-container *ngIf="isMeetingStarted">
  <header class="header">
    <div class="left-header">
      <button class="grid-view" matTooltip="View">
        <i class="far fa-th-large"></i>
      </button>
      <div *ngIf="isScreenRecording" class="screen-recording">
        <i class="far fa-record-vinyl"></i>
        <div class="timer">{{ recordingTime }}</div>
      </div>
    </div>
    <div class="right-header">
      <button class="menu" matTooltip="Menu">
        <span class="material-symbols-outlined"> segment </span>
      </button>
      <button
        class="people"
        matTooltip="Participants"
        (click)="openParticipantSideWindow()"
      >
        <i class="fal fa-user-friends"></i>
      </button>

      <button class="chat" matTooltip="Chat" (click)="openChatSideWindow()">
        <i class="far fa-comment-lines"></i>
      </button>
      <button class="emojis" matTooltip="React">
        <span class="material-symbols-outlined"> emoji_language </span>
      </button>
      <button class="more" matTooltip="More">
        <i class="fas fa-ellipsis-h"></i>
      </button>
      <div class="line"></div>
      <button class="video" (click)="toggleVideo()">
        <i
          class="fas"
          [ngClass]="{
            'fa-video-slash': !isVideoOn,
            'fa-video': isVideoOn
          }"
        ></i>
      </button>
      <button class="mic" (click)="toggleMic()">
        <i
          class="fas"
          [ngClass]="{
            'fa-microphone': !isMicOn,
            'fa-microphone-slash': isMicOn
          }"
        ></i>
      </button>
      <button class="share" (click)="toggleScreenShare()">
        <span class="material-symbols-outlined" *ngIf="!isScreenSharing">
          screen_share
        </span>
        <span
          class="material-symbols-outlined"
          *ngIf="isScreenSharing"
          [ngStyle]="{ color: iconColor }"
        >
          stop_screen_share
        </span>
      </button>
      <button class="leave-btn">
        <div class="phone-icon">
          <!-- <span class="material-symbols-outlined"> call_end </span> -->
        </div>
        <h2>Leave</h2>
        <div class="chevron-icon"><i class="fas fa-chevron-down"></i></div>
      </button>
    </div>
  </header>

  <video
    *ngIf="isVideoOn && stream"
    id="video-preview"
    autoplay
    [srcObject]="stream"
  ></video>
  <div id="remoteVideoContainer"></div>
  <div id="remoteAudioContainer"></div>
  <div id="localScreenShareContainer"></div>
  <div *ngIf="participantNameDisconnected">
    "{{ participantNameDisconnected }}" disconnected.
  </div>
  <!-- <ng-container *ngIf="sharedLayout; else offLayout">
    <div class="screenshare-container">
      <div class="grid-item1">
        <img
          src="https://img.freepik.com/premium-photo/watercolor-painting-national-park-featuring-iconic-landmarks-such-as-old-faithful-yellowstone-half-dome-yosemite-intricate-details-nature-wildlife-generate-ai_893737-1017.jpg?size=626&ext=jpg&ga=GA1.1.490661761.1705061609&semt=sph"
          alt="Laptop"
        />
        <p class="person-name">{{ images[0]?.title }}</p>
      </div>
      <div class="grid-item2">
        <div class="person-with-video">
          <div class="img-with-title" *ngFor="let image of images">
            <img [src]="image.src" [alt]="image.title" />
            <p class="person-name">{{ image.title }}</p>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #offLayout>
    <ng-container *ngIf="withVideo; else withoutVideo">
      <div class="screen-off-container">
        <div class="grid-item" *ngFor="let image of images">
          <div class="img-with-title">
            <img [src]="image.src" [alt]="image.title" />
            <p class="person-name">{{ image.title }}</p>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #withoutVideo>
      <div class="screen-off-container">
        <h1 *ngFor="let participant of participants">hello</h1>

        <div class="grid-item" *ngFor="let participant of participants">
          <div class="person-without-video">
            <div class="round-img">
              <img
                *ngIf="participant.dp"
                [src]="participant.dp"
                alt="Image 5"
              />
              <p *ngIf="!participant.dp">{{ participant.name }}</p>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-template> -->
</ng-container>
